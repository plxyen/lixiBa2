<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå∫ L√¨ X√¨ Y√™u Th∆∞∆°ng üå∫</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background: radial-gradient(circle, #b91c1c, #450a0a);
            min-height: 100vh;
            overflow-x: hidden;
            color: #fff;
            background-attachment: fixed;
        }
.lixi-card:hover img {
    filter: drop-shadow(0 0 25px rgba(255, 215, 0, 0.9));
}

        .title-font {
            font-family: 'Dancing Script', cursive;
        }

        .lixi-card {
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }

        .lixi-card:hover {
            transform: translateY(-20px) scale(1.1) rotate(3deg) !important;
            filter: drop-shadow(0 25px 30px rgba(255, 215, 0, 0.4));
        }

        .modal-overlay {
            background: rgba(0, 0, 0, 0.94);
            display: none;
            position: fixed;
            inset: 0;
            z-index: 100;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(8px);
        }

        .modal-content {
            background: #fff;
            background-image: url('https://www.transparenttextures.com/patterns/handmade-paper.png');
            color: #d41f1f;
            border-radius: 30px;
            max-width: 650px;
            width: 100%;
            padding: 40px;
            text-align: center;
            box-shadow: 0 0 60px rgba(255, 215, 0, 0.5);
            position: relative;
            border: 10px double #ffd700;
        }

        .confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 150;
        }

        .opened {
            filter: grayscale(100%) brightness(0.4) !important;
            cursor: default;
            opacity: 0.5;
        }
        
        .opened:hover {
            transform: none !important;
        }

        .student-name {
            display: block;
            margin-top: 20px;
            font-weight: 700;
            color: #b21f1f;
            border-top: 2px solid #ffd700;
            padding-top: 15px;
            font-size: 1.8rem;
            font-family: 'Dancing Script', cursive;
        }

        .flower {
            position: fixed;
            top: -50px;
            pointer-events: none;
            z-index: 1;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(105vh) rotate(360deg);
            }
        }

        #music-status {
            position: fixed;
            bottom: 85px;
            right: 24px;
            font-size: 0.75rem;
            color: #ffd700;
            background: rgba(0,0,0,0.5);
            padding: 2px 8px;
            border-radius: 4px;
            display: none;
        }

        .typing-effect {
            overflow: hidden;
            border-right: .15em solid orange;
            white-space: normal;
            margin: 0 auto;
            animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
        }

        @keyframes typing {
            from { max-height: 0; opacity: 0; }
            to { max-height: 500px; opacity: 1; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: orange; }
        }

        textarea:focus {
            outline: none;
            border-color: #d41f1f;
            box-shadow: 0 0 10px rgba(212, 31, 31, 0.2);
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <canvas id="confetti" class="confetti-canvas"></canvas>

    <div class="max-w-6xl mx-auto text-center relative z-10">
        <h1 class="text-6xl md:text-8xl title-font mb-4 text-yellow-400 animate__animated animate__fadeInDown drop-shadow-2xl">
           üå∫ L√¨ x√¨ y√™u th∆∞∆°ng üå∫
        </h1>
        <p class="text-xl md:text-3xl mb-12 animate__animated animate__fadeInUp text-yellow-100 font-medium tracking-wide">
            Ba M·∫π h√£y ƒë√≥n nh·∫≠n bao l√¨ x√¨ t·ª´ c√°c con y√™u nh√©! üòò
        </p>

        <div id="game-grid" class="grid grid-cols-3 sm:grid-cols-5 md:grid-cols-7 gap-6 md:gap-10 p-4">
            <!-- JS dynamic content -->
        </div>
    </div>

    <!-- Modal hi·ªÉn th·ªã th√¥ng ƒëi·ªáp -->
    <div id="wish-modal" class="modal-overlay" onclick="closeModal()">
        <div class="modal-content animate__animated animate__zoomInDown" onclick="event.stopPropagation()">
            <div class="absolute top-4 right-4 text-3xl cursor-pointer text-gray-400 hover:text-red-600 font-bold" onclick="closeModal()">√ó</div>
            <div id="modal-icon" class="text-6xl mb-6">üßß</div>
            <div id="modal-status-text" class="text-xl font-bold mb-4 text-red-600 hidden">L·ªôc y√™u th∆∞∆°ng ƒë√£ trao üíå</div>
            
            <div id="step-1">
                <h2 class="text-xl font-bold mb-2 text-yellow-600 uppercase tracking-[0.4em]">Th√¥ng ƒëi·ªáp y√™u th∆∞∆°ng</h2>
                <div id="wish-text" class="text-2xl md:text-3xl italic leading-relaxed text-red-800 font-medium py-8 min-h-[150px] flex flex-col items-center justify-center">
                    <!-- N·ªôi dung c·ªßa con -->
                </div>
                <div class="flex flex-col sm:flex-row gap-4 justify-center mt-6">
                    <button onclick="showReplyArea()" class="bg-yellow-500 hover:bg-yellow-600 text-red-900 font-bold py-4 px-8 rounded-full transition duration-300 shadow-lg border-2 border-yellow-300">
                        Con y√™u ƒë√¢y r·ªìi!
                    </button>
                    <button onclick="closeModal()" class="bg-gradient-to-r from-red-600 to-red-800 hover:from-red-700 hover:to-red-900 text-yellow-400 font-bold py-4 px-8 rounded-full transition duration-300 shadow-xl border-2 border-yellow-500">
                        C·∫£m ∆°n con!
                    </button>
                </div>
            </div>

            <div id="step-reply" class="hidden">
                <h2 class="text-xl font-bold mb-4 text-yellow-600 uppercase">L·ªùi y√™u th∆∞∆°ng ƒë·∫ßu xu√¢n</h2>
                <textarea id="parent-reply" class="w-full h-32 p-4 border-2 border-yellow-400 rounded-xl text-red-800 text-lg resize-none mb-4 bg-yellow-50" placeholder="Ba m·∫π mu·ªën nh·∫Øn ƒëi·ªÅu g√¨ v·ªõi con?"></textarea>
                <button onclick="submitReply()" class="bg-red-700 hover:bg-red-800 text-yellow-400 font-bold py-3 px-10 rounded-full transition duration-300 shadow-lg border-2 border-yellow-500">
                    G·ª≠i con y√™u ‚ù§Ô∏è
                </button>
            </div>

            <div id="step-final" class="hidden">
                <div class="text-xl md:text-2xl text-red-900 leading-relaxed font-semibold italic p-6 border-2 border-dashed border-red-200 rounded-2xl bg-red-50 typing-effect">
                    ‚ÄúM·ªói bao l√¨ x√¨ l√† m·ªói l·ªùi y√™u th∆∞∆°ng c·ªßa c√°c con g·ª≠i ƒë·∫øn ba m·∫π. <br>
                    D√π k·∫øt qu·∫£ h·ªçc t·∫≠p th·∫ø n√†o, s·ª± c·ªë g·∫Øng, s·ª± tr∆∞·ªüng th√†nh v√† t√¨nh c·∫£m c·ªßa c√°c con lu√¥n l√† m√≥n qu√† qu√Ω gi√° nh·∫•t ƒë·∫ßu xu√¢n.‚Äù
                </div>
                <button onclick="closeModal()" class="mt-8 bg-red-700 hover:bg-red-800 text-yellow-400 font-bold py-3 px-10 rounded-full transition duration-300 shadow-lg border-2 border-yellow-500">
                    Tr√¢n tr·ªçng ‚ù§Ô∏è
                </button>
            </div>
        </div>
    </div>

    <div id="music-status">Nh·∫•n ƒë·ªÉ nghe nh·∫°c T·∫øt</div>
    <div class="fixed bottom-6 right-6 z-50">
        <button id="music-btn" class="bg-red-700 border-2 border-yellow-500 hover:bg-red-600 text-yellow-400 font-bold p-5 rounded-full shadow-2xl flex items-center gap-3 transition-all scale-100 hover:scale-110" onclick="toggleMusic()">
            <span id="music-icon" class="text-2xl">üîà</span> <span class="hidden md:inline uppercase tracking-tighter">Thanh √¢m y√™u th∆∞∆°ng</span>
        </button>
        <audio id="bg-music" loop preload="auto">
    <source src="tet.mp3" type="audio/mpeg">
</audio>


    </div>

    <script>
        const students = [
            "Th√∫y An", "Gia An", "Di·ªáp Anh", "Tr√∫c Anh", "Ng·ªçc √Ånh", "Thi√™n √Çn", "Gia B·∫£o",
            "Qu·ª≥nh Chi", "Minh Duy", "Ph√∫c ƒêan", "Ti·∫øn ƒê·ª©c", "Gia H√¢n", "Tr√≠ Hi·∫øu", "Minh Huy",
            "Minh Khang", "Minh Kh√¥i", "Minh Khu√™", "Thi√™n Kim", "Sinh L·ªôc", "Ti·ªÉu My",
            "Kh·∫£i Nam", "Kh√¥i Nguy√™n", "B·∫£o Ng·ªçc", "Nguy·ªÖn Nguy·ªÖn", "Tr·ªçng Nh√¢n", "Ho√†ng Nh√¢n",
            "Phi Nhung", "T·∫•n Ph√∫c", "ƒê√¥ng Qu√¢n", "H∆∞∆°ng Qu·ª≥nh", "Ho√†ng Th√°i", "B·∫£o Th∆∞",
            "Minh Thy", "Ho√†ng Tr√≠", "Nh√£ Uy√™n"
        ];

        const messages = [
            "Con c·∫£m ∆°n ba m·∫π ƒë√£ lu√¥n v·∫•t v·∫£ nu√¥i n·∫•ng con n√™n ng∆∞·ªùi.",
            "Ch√∫c ba m·∫π m·ªôt nƒÉm m·ªõi d·ªìi d√†o s·ª©c kh·ªèe v√† lu√¥n h·∫°nh ph√∫c b√™n con.",
            "Con bi·∫øt ∆°n v√¨ ba m·∫π lu√¥n ki√™n nh·∫´n l·∫Øng nghe m·ªói khi con vui bu·ªìn.",
            "Con h·ª©a s·∫Ω n·ªó l·ª±c c·ªë g·∫Øng t·ª´ng ng√†y ƒë·ªÉ ba m·∫π y√™n l√≤ng.",
            "C·∫£m ∆°n ba m·∫π ƒë√£ lu√¥n tin t∆∞·ªüng v√† ·ªßng h·ªô m·ªçi ∆∞·ªõc m∆° c·ªßa con.",
            "Con ch√∫c ba m·∫π lu√¥n tr·∫ª trung, y√™u ƒë·ªùi v√† g·∫∑p nhi·ªÅu may m·∫Øn.",
            "Bi·∫øt ∆°n ba v√¨ nh·ªØng chuy·∫øn xe s·ªõm h√¥m, bi·∫øt ∆°n m·∫π v√¨ nh·ªØng b·ªØa c∆°m ngon.",
            "Con ƒëang h·ªçc c√°ch t·ªët h∆°n m·ªói ng√†y ƒë·ªÉ tr·ªü th√†nh ni·ªÅm t·ª± h√†o c·ªßa ba m·∫π.",
            "Ch√∫c gia ƒë√¨nh m√¨nh lu√¥n ng·∫≠p tr√†n ti·∫øng c∆∞·ªùi v√† s·ª± ·∫•m √°p.",
            "Con c·∫£m ∆°n ba m·∫π ƒë√£ cho con m·ªôt m√°i ·∫•m tuy·ªát v·ªùi nh·∫•t.",
            "Con s·∫Ω c·ªë g·∫Øng ho√†n thi·ªán b·∫£n th√¢n h∆°n ƒë·ªÉ m·∫π ƒë·ª° v·∫•t v·∫£ lo toan.",
            "Bi·∫øt ∆°n ba m·∫π ƒë√£ d·∫°y cho con nh·ªØng b√†i h·ªçc qu√Ω gi√° v·ªÅ s·ª± t·ª≠ t·∫ø.",
            "Ch√∫c ba m·∫π v·∫°n s·ª± nh∆∞ √Ω, c√¥ng vi·ªác lu√¥n thu·∫≠n l·ª£i v√† hanh th√¥ng.",
            "Con y√™u ba m·∫π nhi·ªÅu h∆°n nh·ªØng l·ªùi con c√≥ th·ªÉ n√≥i ra.",
            "C·∫£m ∆°n ba m·∫π ƒë√£ lu√¥n bao dung cho nh·ªØng l·ªói l·∫ßm ng√¢y ng√¥ c·ªßa con.",
            "Con ch√∫c ba m·∫π lu√¥n b√¨nh an, m·ªói ng√†y ƒë·ªÅu l√† m·ªôt ng√†y vui.",
            "Con h·ª©a s·∫Ω chƒÉm s√≥c b·∫£n th√¢n t·ªët ƒë·ªÉ ba m·∫π y√™n l√≤ng c√¥ng t√°c.",
            "Bi·∫øt ∆°n ba m·∫π ƒë√£ lu√¥n d√†nh cho con nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t.",
            "Ch√∫c ba m·∫π c√≥ th√™m th·∫≠t nhi·ªÅu nƒÉng l∆∞·ª£ng v√† ni·ªÅm vui trong cu·ªôc s·ªëng.",
            "Con s·∫Ω n·ªó l·ª±c h∆°n trong vi·ªác t·ª± l·∫≠p ƒë·ªÉ ba m·∫π b·ªõt lo l·∫Øng.",
            "C·∫£m ∆°n ba m·∫π ƒë√£ l√† ƒëi·ªÉm t·ª±a v·ªØng ch·∫Øc nh·∫•t c·ªßa cu·ªôc ƒë·ªùi con.",
            "Ch√∫c ba m·∫π m·ªôt nƒÉm m·ªõi tr√†n ƒë·∫ßy t√†i l·ªôc v√† th·ªãnh v∆∞·ª£ng.",
            "Con bi·∫øt ∆°n nh·ªØng l·ªùi khuy√™n d·∫°y nghi√™m kh·∫Øc nh∆∞ng ƒë·∫ßy t√¨nh th∆∞∆°ng c·ªßa ba.",
            "Con mong gia ƒë√¨nh m√¨nh m√£i g·∫Øn k·∫øt v√† y√™u th∆∞∆°ng nhau nh∆∞ th·∫ø n√†y.",
            "Con ƒëang h·ªçc c√°ch qu·∫£n l√Ω b·∫£n th√¢n t·ªët h∆°n t·ª´ng ng√†y.",
            "C·∫£m ∆°n m·∫π v√¨ nh·ªØng c√°i √¥m ·∫•m √°p m·ªói khi con th·∫•y m·ªát m·ªèi.",
            "Ch√∫c ba m·∫π lu√¥n gi·ªØ ƒë∆∞·ª£c ng·ªçn l·ª≠a ƒëam m√™ trong c√¥ng vi·ªác.",
            "Con bi·∫øt ∆°n s·ª± hy sinh th·∫ßm l·∫∑ng c·ªßa ba m·∫π d√†nh cho con.",
            "Con h·ª©a s·∫Ω lu√¥n trung th·ª±c, hi·∫øu th·∫£o v√† s·ªëng c√≥ tr√°ch nhi·ªám.",
            "Ch√∫c ba m·∫π lu√¥n r·∫°ng r·ª° nh∆∞ nh·ªØng ƒë√≥a hoa xu√¢n.",
            "C·∫£m ∆°n ba m·∫π ƒë√£ cho con c∆° h·ªôi ƒë∆∞·ª£c h·ªçc t·∫≠p v√† l·ªõn kh√¥n.",
            "Con mong ba m·∫π h√£y d√†nh th·ªùi gian ngh·ªâ ng∆°i v√† y√™u b·∫£n th√¢n nhi·ªÅu h∆°n.",
            "Bi·∫øt ∆°n ba m·∫π v√¨ ƒë√£ lu√¥n che ch·ªü con tr∆∞·ªõc nh·ªØng b√£o gi√¥ng.",
            "Con ch√∫c ba m·∫π m·ªói nƒÉm ƒë·ªÅu h·∫°nh ph√∫c v√† kh·ªèe m·∫°nh h∆°n nƒÉm c≈©.",
            "Con ƒëang n·ªó l·ª±c h·∫øt m√¨nh ƒë·ªÉ m·ªói ng√†y ƒë·ªÅu ti·∫øn b·ªô h∆°n m·ªôt ch√∫t."
        ];
const lixiImages = Array.from({ length: 35 }, (_, i) => 
    `${i + 1}.jpg`
);


        let data = students.map((name, index) => ({
    name: name,
    message: messages[index],
    image: lixiImages[index]
}));


        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        data = shuffle(data);

        const grid = document.getElementById('game-grid');
        const modal = document.getElementById('wish-modal');
        const wishText = document.getElementById('wish-text');
        const music = document.getElementById('bg-music');
        const musicBtn = document.getElementById('music-btn');
        const musicIcon = document.getElementById('music-icon');
        const musicStatus = document.getElementById('music-status');

      function getLixiImage(imageSrc) {
    return `
        <img 
            src="${imageSrc}" 
            alt="Bao l√¨ x√¨ y√™u th∆∞∆°ng"
            class="w-[120px] md:w-[150px] transition-all duration-300"
            style="filter: drop-shadow(0 10px 15px rgba(0,0,0,0.5));"
        />
    `;
}





        function createFlowers() {
            const flowerCount = 15;
            for(let i=0; i<flowerCount; i++) {
                const f = document.createElement('div');
                f.className = 'flower';
                const isMai = Math.random() > 0.5;
                f.innerHTML = isMai ? 'üåº' : 'üå∏';
                f.style.left = Math.random() * 100 + 'vw';
                f.style.fontSize = (Math.random() * 20 + 10) + 'px';
                f.style.animationDuration = (Math.random() * 4 + 6) + 's';
                f.style.opacity = Math.random() * 0.7 + 0.3;
                document.body.appendChild(f);
            }
        }

        function initGame() {
            createFlowers();
            data.forEach((item, i) => {
                const div = document.createElement('div');
                const randomRotate = Math.floor(Math.random() * 8) - 4;
                div.className = 'lixi-card animate__animated animate__fadeInUp';
                div.style.animationDelay = `${i * 0.03}s`;
                div.style.transform = `rotate(${randomRotate}deg)`;
                div.innerHTML = getLixiImage(item.image);
                div.onclick = () => openLixi(i, div);
                grid.appendChild(div);
            });
            
            setTimeout(() => {
                if(music.paused) musicStatus.style.display = 'block';
            }, 2000);
        }

        function openLixi(index, element) {
            if (element.classList.contains('opened')) return;
            const student = data[index];
            
            // Reset modal steps
            document.getElementById('step-1').classList.remove('hidden');
            document.getElementById('step-reply').classList.add('hidden');
            document.getElementById('step-final').classList.add('hidden');
            document.getElementById('modal-status-text').classList.add('hidden');
            document.getElementById('modal-icon').classList.remove('hidden');
            document.getElementById('parent-reply').value = '';
            document.getElementById('modal-icon').innerText = 'üßß';

            wishText.innerHTML = `
                <span class="mb-4">"${student.message}"</span>
                <span class="student-name">T√¨nh y√™u t·ª´ con: ${student.name}</span>
            `;
            modal.style.display = 'flex';
            startConfetti();
            element.classList.add('opened');
            element.style.transform = "scale(0.8) translateY(20px) rotate(0deg) !important";
        }

        function showReplyArea() {
            document.getElementById('step-1').classList.add('hidden');
            document.getElementById('step-reply').classList.remove('hidden');
            document.getElementById('modal-icon').innerText = '‚úçÔ∏è';
            document.getElementById('parent-reply').focus();
        }

        function submitReply() {
            document.getElementById('step-reply').classList.add('hidden');
            document.getElementById('step-final').classList.remove('hidden');
            document.getElementById('modal-icon').classList.add('hidden');
            document.getElementById('modal-status-text').classList.remove('hidden');
            startConfetti(); 
        }

        function closeModal() {
            modal.style.display = 'none';
            stopConfetti();
        }

        function toggleMusic() {
            if (music.paused) {
                music.play().then(() => {
                    musicIcon.innerText = "üîä";
                    musicBtn.classList.replace('bg-red-700', 'bg-green-600');
                    musicStatus.style.display = 'none';
                }).catch(err => {
                    console.log("Autoplay blocked");
                });
            } else {
                music.pause();
                musicIcon.innerText = "üîà";
                musicBtn.classList.replace('bg-green-600', 'bg-red-700');
            }
        }

        const canvas = document.getElementById('confetti');
        const ctx = canvas.getContext('2d');
        let pieces = [];
        let animationFrame;

        function startConfetti() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            pieces = [];
            const colors = ['#ffd700', '#ff0000', '#fff', '#ff69b4', '#00ff00'];
            for (let i = 0; i < 150; i++) {
                pieces.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    size: Math.random() * 8 + 4,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    speed: Math.random() * 4 + 2,
                    rotation: Math.random() * 360,
                    oscillation: Math.random() * 2
                });
            }
            if (!animationFrame) animateConfetti();
        }

        function animateConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            pieces.forEach(p => {
                p.y += p.speed;
                p.x += Math.sin(p.y / 30) * p.oscillation;
                p.rotation += 4;
                if (p.y > canvas.height) p.y = -20;
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.rotation * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size * 0.6);
                ctx.restore();
            });
            animationFrame = requestAnimationFrame(animateConfetti);
        }

        function stopConfetti() {
            cancelAnimationFrame(animationFrame);
            animationFrame = null;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        window.onload = initGame;
        window.onresize = () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        };
    </script>
</body>
</html>
